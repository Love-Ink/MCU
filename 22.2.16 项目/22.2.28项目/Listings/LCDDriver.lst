C51 COMPILER V9.60.0.0   LCDDRIVER                                                         02/28/2022 17:32:37 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE LCDDRIVER
OBJECT MODULE PLACED IN .\Objects\LCDDriver.obj
COMPILER INVOKED BY: C:\Program Files\Keil 5\C51\BIN\C51.EXE LCDDriver.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRI
                    -NT(.\Listings\LCDDriver.lst) TABS(2) OBJECT(.\Objects\LCDDriver.obj)

line level    source

   1          #include "LCDDriver.h"
   2          
   3          
   4          void LCDRWReady(void)
   5          {
   6   1        uchar Busy;
   7   1        LCD_RW = 1;
   8   1        LCD_RS = 0;
   9   1        LCD_DB = 0x00;
  10   1        do {
  11   2          LCD_E = 1;
  12   2          Busy = (LCD_DB & 0x80);
  13   2          LCD_E = 0;
  14   2        }while(Busy);
  15   1      }
  16          void LCDWriteCmd(uchar cmd)
  17          {
  18   1        LCDRWReady();
  19   1        LCD_RW = 0;
  20   1        LCD_RS = 0;
  21   1        LCD_DB = cmd;
  22   1        delay(1);
  23   1        LCD_E = 1;
  24   1        delay(1);
  25   1        LCD_E = 0;
  26   1      }
  27          void LCDWriteDat(uchar dat)
  28          {
  29   1        LCDRWReady();
  30   1        LCD_RW = 0;
  31   1        LCD_RS = 1;
  32   1        LCD_DB = dat;
  33   1        delay(1);
  34   1        LCD_E = 1;
  35   1        delay(1);
  36   1        LCD_E = 0;
  37   1        
  38   1        
  39   1      }
  40          void LCD_Init(void)
  41          {
  42   1        #if LCD_12864 
                LCD_PSB = 1;
                LCDWriteCmd(0x34);
                LCDWriteCmd(0x30);
                LCDWriteCmd(0x0C);
                LCDWriteCmd(0x01);
                #else 
  49   1        LCDWriteCmd(0x0C);
  50   1        LCDWriteCmd(0x06);
  51   1        LCDWriteCmd(0x38);
  52   1        #endif
  53   1      }
  54          void LCDShowStr(uchar x,uchar y,uchar *str)
C51 COMPILER V9.60.0.0   LCDDRIVER                                                         02/28/2022 17:32:37 PAGE 2   

  55          {
  56   1        LCDXYConfig(x,y);
  57   1        while(*str != '\0')
  58   1        LCDWriteDat(*str++);
  59   1      }
  60          
  61          void LCDXYConfig(uchar x,uchar y)
  62          {
  63   1        uchar xy;
  64   1        #if LCD_12864 
                switch(y)
                {
                  case 0:xy = 0x00+x;break;
                  case 1:xy = 0x10+x;break;
                  case 2:xy = 0x08+x;break;
                  case 3:xy = 0x18+x;break;
                  default:break;
                }
                LCDWriteCmd(xy+0x80);
                #else
  75   1        switch(y)
  76   1        {
  77   2          case 0:xy = 0x00+x;break;
  78   2          case 1:xy = 0x40+x;break;
  79   2          default:break;
  80   2        }
  81   1        LCDWriteCmd(xy+0x80);
  82   1        #endif
  83   1      }
  84          void delay(unsigned int ms)
  85          {
  86   1        unsigned char i;
  87   1        while(ms--)
  88   1        {
  89   2          for(i=0;i<250;i++)
  90   2          {
  91   3            _nop_();
  92   3            _nop_();
  93   3            _nop_();
  94   3            _nop_();
  95   3          }
  96   2        }
  97   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    174    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       4
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
